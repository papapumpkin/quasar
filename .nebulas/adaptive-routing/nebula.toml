[nebula]
name = "adaptive-routing"
description = "Analyze each phase's complexity signals (scope file count, body length, dependency depth, task type) and automatically route to the optimal model. Simple tasks get cheaper models, complex ones get expensive models."

[defaults]
type = "feature"
priority = 2
labels = ["quasar", "adaptive-routing", "cost-optimization"]

[execution]
max_workers = 6
max_review_cycles = 5
max_budget_usd = 50.0
gate = "trust"

[context]
repo = "github.com/papapumpkin/quasar"
working_dir = "."
goals = [
    "Reduce nebula execution cost by routing simple phases to cheaper models",
    "Score phase complexity from scope file count, body length, dependency depth, and task type",
    "Define model tiers (fast/balanced/heavy) with configurable thresholds",
    "Integrate scoring into ResolveExecution so auto-routing is transparent to workers",
    "Emit telemetry events for every routing decision to enable cost analysis",
    "Allow CLI and per-phase overrides to disable or pin routing",
]
constraints = [
    "Follow existing Go conventions from CLAUDE.md",
    "Explicit phase-level Model overrides must always take precedence over auto-routing",
    "Scoring must be deterministic â€” same inputs always produce the same tier",
    "No new external dependencies; use stdlib only",
    "All new code must have table-driven tests",
    "Auto-routing is opt-in at the nebula level via an execution flag; existing nebulas are unaffected",
]
