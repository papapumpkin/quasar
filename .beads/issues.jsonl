{"id":"quasar-2ms","title":"Rich detail panel with formatted output and scroll indicators","description":"## Problem\n\nThe detail panel is a plain viewport that dumps raw agent output text. There's no formatting, no scroll position indicator, and no contextual information about the selected item.\n\n## Solution\n\n### Contextual Headers\n- When a loop agent row is selected: show role, cycle number, duration, cost, and issue count as a formatted header above the output\n- When a nebula phase is selected: show phase ID, title, wave number, dependencies, status, cost, cycles used\n\n### Output Formatting\n- Wrap agent output in a styled box with the role as title\n- Highlight key patterns in output: `APPROVED` in green, `ISSUE:` blocks in yellow, `SEVERITY: critical` in red\n- Truncate very long outputs with a \"(truncated — N lines)\" indicator\n\n### Scroll Indicators\n- Show scroll position: `↑ 12 more` at top, `↓ 34 more` at bottom when content overflows\n- Use the viewport's built-in scroll percentage or compute from `YOffset` and content height\n- Style the indicators dimly so they don't distract\n\n### Empty State\n- When no item is selected or detail is collapsed, show a hint: \"Press enter to expand details\"\n- When an agent is still working, show \"Output will appear when the agent completes\"\n\n## Files to Modify\n\n- `internal/tui/detailpanel.go` — Contextual headers, output formatting, scroll indicators, empty states\n- `internal/tui/model.go` — Pass richer context to detail panel on selection change\n- `internal/tui/loopview.go` — Expose selected entry context (role, cycle, cost, etc.)\n- `internal/tui/nebulaview.go` — Expose selected phase context\n\n## Acceptance Criteria\n\n- [ ] Detail panel shows contextual header for selected item\n- [ ] Agent output has key patterns highlighted (APPROVED, ISSUE, SEVERITY)\n- [ ] Scroll indicators show when content overflows\n- [ ] Empty states provide helpful hints\n- [ ] Long output is truncated with indicator\n- [ ] Tests for output formatting helpers\n- [ ] `go build` and `go test ./internal/tui/...` pass","status":"open","priority":2,"issue_type":"feature","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:20:34Z","created_by":"Aaron","updated_at":"2026-02-16T18:20:34Z","labels":["quasar","tui"]}
{"id":"quasar-46w","title":"Fix nebula TUI: hierarchical navigation with per-phase tracking","description":"NebulaView is broken - phases not populated, no drill-down. Need: phase-aware UI bridge, per-phase LoopViews, navigation stack (phases→cycles→output).","status":"in_progress","priority":1,"issue_type":"bug","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:28:28Z","created_by":"Aaron","updated_at":"2026-02-16T18:28:31Z"}
{"id":"quasar-6zr","title":"Keyboard shortcuts for pause, resume, stop, and retry","description":"## Problem\n\nThe TUI currently supports navigation (j/k, enter, esc, q) and gate decisions, but has no way to pause, stop, or retry execution. Users must create PAUSE/STOP files manually. The `keys.go` defines `Pause`, `Stop`, and `Retry` bindings but they aren't wired up in `model.go`.\n\n## Solution\n\nWire the keyboard shortcuts to actual execution control by writing intervention files that the nebula Watcher already monitors:\n\n### Pause/Resume (`p` key)\n- On first press: write a `PAUSE` file to the nebula directory (same mechanism `handlePause` already reads)\n- Toggle behavior: if paused, pressing `p` again removes the PAUSE file to resume\n- Update status bar to show \"PAUSED\" indicator when paused\n- Send a `MsgPauseToggled{Paused bool}` message for UI state\n\n### Stop (`s` key)\n- Write a `STOP` file to the nebula directory\n- Show confirmation in the status bar: \"Stopping…\"\n- The existing `handleStop` in worker.go picks it up\n- Only active in nebula mode (not loop mode, where there's only one task)\n\n### Retry (`r` key)\n- Only meaningful when viewing a failed phase in nebula mode\n- Sends a signal to retry the selected phase\n- Requires the phase to be in failed state\n\n### Implementation\n- Add `Paused bool`, `NebulaDir string` fields to `AppModel`\n- In `handleKey`, when `p`/`s`/`r` are pressed, write intervention files via `os.WriteFile`/`os.Remove`\n- Add new message types: `MsgPauseToggled`, `MsgStopRequested`\n- Update footer to show active controls based on mode and state\n- Pass `NebulaDir` into `AppModel` from `cmd/nebula.go`\n\n## Files to Modify\n\n- `internal/tui/model.go` — Add fields, wire key handlers, new messages\n- `internal/tui/msg.go` — Add `MsgPauseToggled`, `MsgStopRequested`\n- `internal/tui/keys.go` — Ensure pause/stop/retry bindings are enabled in correct modes\n- `internal/tui/statusbar.go` — Show \"PAUSED\" / \"STOPPING\" indicators\n- `internal/tui/footer.go` — Update footer hints dynamically\n- `internal/tui/tui.go` — Accept `NebulaDir` option for intervention file paths\n- `cmd/nebula.go` — Pass nebula dir into TUI\n\n## Acceptance Criteria\n\n- [ ] `p` toggles pause (writes/removes PAUSE file)\n- [ ] `s` writes STOP file in nebula mode\n- [ ] Status bar shows PAUSED/STOPPING state\n- [ ] Footer updates to show relevant controls\n- [ ] Controls are disabled in loop mode where they don't apply\n- [ ] Tests for pause toggle logic\n- [ ] `go build` and `go test ./...` pass","status":"open","priority":1,"issue_type":"feature","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:20:35Z","created_by":"Aaron","updated_at":"2026-02-16T18:20:35Z","labels":["quasar","tui"]}
{"id":"quasar-7j4","title":"Rich color theme with adaptive palette and visual hierarchy","description":"## Problem\n\nThe current `styles.go` has a basic color palette with flat, uniform styling. The status bar, row highlights, and section borders all look similar. There's no visual hierarchy — everything is roughly the same visual weight.\n\n## Solution\n\nRedesign the Lip Gloss style system in `internal/tui/styles.go` for a polished, high-contrast terminal experience:\n\n### Color Palette\n- Use a cohesive palette with primary (cyan/blue), accent (gold/amber), success (green), danger (red), and muted (gray) tones\n- Add `colorprofile` detection to gracefully degrade from TrueColor → 256-color → ANSI16 (lipgloss handles this, but verify the colors look good across profiles)\n- Define semantic color variables: `colorPrimary`, `colorAccent`, `colorSuccess`, `colorDanger`, `colorMuted`, `colorSurface`, `colorSurfaceBright`\n\n### Visual Hierarchy\n- **Status bar**: Bold background (dark blue/indigo), white text, the most visually prominent element\n- **Section headers** (Cycle N, Phase table header): Subtle background tint or underline, not as heavy as status bar\n- **Selected row**: Bright foreground + subtle left-border indicator (▎or ▌) instead of just bold\n- **Active/working items**: Pulsing color via spinner (already have spinner, but add colored spinner dots)\n- **Completed items**: Muted green with checkmark\n- **Failed items**: Red with ✗\n- **Dim/waiting items**: Gray, clearly de-emphasized\n\n### Borders \u0026 Separators\n- Use `lipgloss.RoundedBorder()` for the detail panel instead of `NormalBorder()`\n- Add a thin horizontal rule between status bar and content (lipgloss border on bottom only)\n- Footer should have a top border separating it from content\n\n## Files to Modify\n\n- `internal/tui/styles.go` — Complete redesign of style variables\n- `internal/tui/statusbar.go` — Use new status bar styles\n- `internal/tui/loopview.go` — Use selection indicator, colored checkmarks\n- `internal/tui/nebulaview.go` — Use selection indicator, status-colored icons\n- `internal/tui/detailpanel.go` — Rounded border, styled title\n- `internal/tui/footer.go` — Top border, better key/desc contrast\n\n## Acceptance Criteria\n\n- [ ] Status bar is visually dominant with background color\n- [ ] Selected rows have a visible left indicator (▎)\n- [ ] Done/failed/working/waiting states are clearly distinguishable at a glance\n- [ ] Detail panel has rounded border\n- [ ] Footer has top separator\n- [ ] Colors look acceptable on both dark and light terminal backgrounds\n- [ ] `go build` and `go test ./internal/tui/...` pass","status":"in_progress","priority":1,"issue_type":"feature","assignee":"quasar-coder","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:20:34Z","created_by":"Aaron","updated_at":"2026-02-16T18:23:46Z","labels":["quasar","tui"]}
{"id":"quasar-8s1","title":"Error and completion overlay screens","description":"## Problem\n\nWhen the loop or nebula finishes (success, error, max cycles, budget exceeded), the TUI just sets `Done = true` but doesn't communicate the outcome visually. The user has to quit and read stderr. Similarly, errors during execution are added to a messages slice but aren't surfaced prominently.\n\n## Solution\n\n### Completion Overlay\n- When `MsgLoopDone` or `MsgNebulaDone` arrives, show a centered overlay:\n  - **Success**: Green border, checkmark, \"Task complete\" with total cost and duration\n  - **Max cycles**: Yellow border, warning icon, \"Max cycles reached (N)\" with suggestion\n  - **Budget exceeded**: Red border, \"Budget exceeded ($X / $Y)\"\n  - **Error**: Red border, error message\n  - **Nebula results**: Summary table of phase outcomes (done/failed/skipped counts)\n- Overlay has \"Press q to exit\" hint at bottom\n- The underlying view is still visible (dimmed) behind the overlay\n\n### Error Toast\n- When `MsgError` arrives during execution (not at completion), show a brief toast notification\n- Toast appears at the bottom of the screen above the footer for 5 seconds, then fades\n- Red background, white text, shows the error message\n- Multiple errors queue up\n\n### Implementation\n- New file: `internal/tui/overlay.go` — shared overlay rendering (centered box on dimmed background)\n- Add `Overlay *CompletionOverlay` field to `AppModel`\n- Add `Toasts []Toast` with auto-dismiss via `tea.Tick`\n\n## Files to Modify\n\n- `internal/tui/overlay.go` — New file: CompletionOverlay and Toast types with rendering\n- `internal/tui/model.go` — Add overlay/toast fields, handle completion messages, toast auto-dismiss\n- `internal/tui/msg.go` — Add `MsgToastExpired{ID int}` for auto-dismiss\n\n## Acceptance Criteria\n\n- [ ] Completion overlay appears on task/nebula completion\n- [ ] Overlay shows appropriate icon, color, and message for each outcome\n- [ ] Underlying view is visible but dimmed behind overlay\n- [ ] Error toasts appear briefly during execution\n- [ ] Toasts auto-dismiss after 5 seconds\n- [ ] `q` exits from the completion overlay\n- [ ] Tests for overlay rendering\n- [ ] `go build` and `go test ./internal/tui/...` pass","status":"open","priority":3,"issue_type":"feature","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:20:35Z","created_by":"Aaron","updated_at":"2026-02-16T18:20:35Z","labels":["quasar","tui"]}
{"id":"quasar-amu","title":"create a script to run go fmt recursively on every go file in this repo","description":"create a script to run go fmt recursively on every go file in this repo","status":"closed","priority":2,"issue_type":"task","assignee":"quasar-reviewer","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:01:03Z","created_by":"Aaron","updated_at":"2026-02-16T18:04:48Z","closed_at":"2026-02-16T18:04:48Z","close_reason":"Approved by reviewer","labels":["quasar"],"comments":[{"id":1,"issue_id":"quasar-amu","author":"Aaron","text":"[coder cycle 1]\nIt seems `git push` needs your manual approval. Please run `git push` to complete the workflow.\n\n## Summary\n\n**What changed:** Updated `scripts/fmt.sh` from a format-checker (that only listed unformatted files and exited with error) to a format-applier that:\n\n1. Lists any unformatted Go files via `gofmt -l .`  \n2. Actually reformats them in-place via `gofmt -w .`\n3. Reports what was reformatted, or confirms everything was already formatted\n\n**Why:** The previous script only **checked** formatting and failed if files weren't formatted. The task requested a script that **runs** `go fmt` recursively on every Go file — so the script now applies formatting rather than just reporting violations.\n\nThe script follows the existing patterns in `scripts/` (bash with `set -euo pipefail`, stderr output). Bead `quasar-amu` has been closed. Two commits are ready to push:\n- `e4d4d9e` — update fmt.sh to apply formatting instead of just checking\n- `671d399` — sync beads","created_at":"2026-02-16T18:04:15Z"},{"id":2,"issue_id":"quasar-amu","author":"Aaron","text":"[reviewer cycle 1]\nThe review is straightforward. Let me assess the changes:\n\n**What changed:** `scripts/fmt.sh` was converted from a format *checker* (list violations, exit 1) to a format *applier* (list unformatted files, reformat them in-place).\n\n**Review findings:**\n\n1. **Correctness** ✅ — The script does what was requested: runs `gofmt -w .` recursively on all Go files. It first lists what will change, then applies formatting.\n\n2. **Pattern consistency** ✅ — Follows the same conventions as sibling scripts: `#!/usr/bin/env bash`, `set -euo pipefail`, all output to stderr.\n\n3. **Executable permission** ✅ — File is `chmod +x` like all other scripts.\n\n4. **Error handling** ✅ — `set -euo pipefail` covers unexpected failures. `gofmt -l .` and `gofmt -w .` will exit non-zero on I/O errors, which `set -e` will catch.\n\n5. **Edge cases** — One minor observation: there's a small TOCTOU race between `gofmt -l .` and `gofmt -w .` (a file could be created/modified between the two calls), but this is negligible for a developer utility script. Also, `gofmt -w .` reformats everything again even though we already know which files need it — could pass `$changed` to `gofmt -w` instead — but again, trivial for a dev script.\n\n6. **Security** ✅ — No user input, no untrusted paths. This is a local dev utility.\n\n7. **Task description note**: The task says \"run go fmt recursively\" but the script uses `gofmt -w .` rather than `go fmt ./...`. Both achieve the same result — `go fmt` is just a wrapper around `gofmt`. Using `gofmt` directly is actually more appropriate here since it gives us the `-l` flag for listing, and the original script already used `gofmt`.\n\nAPPROVED: Clean, simple change that converts the format checker into a format applier. Follows existing script conventions (bash strict mode, stderr output, executable permissions). The logic is correct and handles both the \"needs formatting\" and \"already formatted\" cases appropriately.\n\nREPORT:\nSATISFACTION: high\nRISK: lo... [truncated]","created_at":"2026-02-16T18:04:47Z"},{"id":3,"issue_id":"quasar-amu","author":"Aaron","text":"[reviewer report]\nSatisfaction: high\nRisk: low\nNeeds human review: no\nSummary: Simple script update converting fmt.sh from a format checker to a format applier using gofmt, following existing project conventions cleanly.","created_at":"2026-02-16T18:04:48Z"}]}
{"id":"quasar-new","title":"output a helloworld.md","description":"output a helloworld.md","status":"in_progress","priority":2,"issue_type":"task","assignee":"quasar-coder","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:24:54Z","created_by":"Aaron","updated_at":"2026-02-16T18:24:54Z","labels":["quasar"]}
{"id":"quasar-prt","title":"Graceful terminal resize and narrow-width handling","description":"## Problem\n\nThe TUI currently receives `tea.WindowSizeMsg` and updates width/height, but the layout doesn't adapt well to narrow terminals (\u003c 60 columns) or very short terminals (\u003c 15 rows). Status bar text wraps, progress bars break, and the detail panel may have zero height.\n\n## Solution\n\n### Minimum Size Handling\n- Define minimum usable dimensions: 40 columns, 10 rows\n- Below minimum: show a centered \"Terminal too small\" message instead of the broken layout\n- At the boundary: hide optional elements (detail panel, progress bars) to fit\n\n### Adaptive Layout\n- Status bar: truncate nebula name with ellipsis when terminal is narrow\n- Progress bars: switch to compact format (percentage only) below 60 columns\n- Phase table: truncate phase IDs with ellipsis when they don't fit\n- Footer: show abbreviated key hints below 60 columns (`↑↓` instead of `↑/k:up  ↓/j:down`)\n- Detail panel: auto-collapse when terminal height \u003c 20 rows\n\n### Resize Transitions\n- On resize, recalculate all layout dimensions\n- Reflow the detail panel viewport content\n- Ensure the cursor remains valid (clamp if list shrunk)\n\n## Files to Modify\n\n- `internal/tui/model.go` — Minimum size check, adaptive layout logic, cursor clamping on resize\n- `internal/tui/statusbar.go` — Truncation with ellipsis for narrow terminals\n- `internal/tui/footer.go` — Compact mode for narrow terminals\n- `internal/tui/loopview.go` — Width-aware rendering\n- `internal/tui/nebulaview.go` — Truncate phase IDs\n- `internal/tui/detailpanel.go` — Auto-collapse logic\n\n## Acceptance Criteria\n\n- [ ] Terminal below 40x10 shows \"Terminal too small\" message\n- [ ] Status bar truncates cleanly at narrow widths\n- [ ] Footer adapts to compact mode\n- [ ] Detail panel auto-collapses on short terminals\n- [ ] Cursor remains valid after resize that shrinks the list\n- [ ] No panics or rendering glitches during rapid resize\n- [ ] Tests for truncation helpers and layout calculations\n- [ ] `go build` and `go test ./internal/tui/...` pass","status":"open","priority":3,"issue_type":"task","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:20:36Z","created_by":"Aaron","updated_at":"2026-02-16T18:20:36Z","labels":["quasar","tui"]}
{"id":"quasar-tf5","title":"Animated progress bars and enhanced spinners","description":"## Problem\n\nThe current TUI uses a basic `spinner.Dot` for working agents. There's no visual progress bar for nebula completion, no elapsed time per agent, and no budget consumption indicator.\n\n## Solution\n\n### Nebula Progress Bar\n- Add a `progress.Model` (from `charmbracelet/bubbles`) to the status bar area\n- Shows completion percentage: filled bar with phase count label\n- Color transitions: blue → green as progress increases\n- Update on every `MsgNebulaProgress`\n\n### Agent Spinners\n- Use `spinner.MiniDot` or `spinner.Pulse` for a more refined look\n- Color the spinner to match the agent role (blue for coder, yellow for reviewer)\n- Show elapsed time next to the spinner that ticks up: `working… 12s ⠋`\n\n### Budget Bar\n- Small inline progress indicator in the status bar showing budget consumption\n- Format: `$1.24 ━━━━━━░░░░ $10.00` (filled proportional to spend/budget)\n- Changes color from green → yellow → red as budget approaches limit\n\n### Cycle Progress (Loop Mode)\n- Show `cycle 2/5` with a mini bar in the status bar: `[██░░░]`\n\n## Files to Modify\n\n- `internal/tui/statusbar.go` — Add progress bar rendering for budget and cycle/phase progress\n- `internal/tui/loopview.go` — Enhanced spinner with elapsed time, colored per role\n- `internal/tui/nebulaview.go` — Enhanced spinner with elapsed time\n- `internal/tui/model.go` — Track elapsed time per agent (start time on MsgAgentStart)\n\n## Acceptance Criteria\n\n- [ ] Nebula mode shows a visual progress bar in the status bar area\n- [ ] Budget consumption is visualized inline\n- [ ] Working agents show elapsed time alongside spinner\n- [ ] Spinners are colored per agent role\n- [ ] Loop mode shows cycle progress mini-bar\n- [ ] All indicators update smoothly without flicker\n- [ ] Tests for progress bar string formatting\n- [ ] `go build` and `go test ./internal/tui/...` pass","status":"open","priority":2,"issue_type":"feature","owner":"aa11salm@gmail.com","created_at":"2026-02-16T18:20:35Z","created_by":"Aaron","updated_at":"2026-02-16T18:20:35Z","labels":["quasar","tui"]}
{"id":"quasar-ug2","title":"BubbleTea TUI for Quasar","description":"Full TUI replacement using BubbleTea. Phase 1: foundation (msg, bridge, gater, styles, keys, AgentOutput). Phase 2: loop view. Phase 3: nebula view. Phase 4: polish.","status":"closed","priority":1,"issue_type":"feature","owner":"aa11salm@gmail.com","created_at":"2026-02-16T17:33:24Z","created_by":"Aaron","updated_at":"2026-02-16T17:42:08Z","closed_at":"2026-02-16T17:42:08Z","close_reason":"implemented BubbleTea TUI with bridge pattern, loop view, nebula view, gate prompt, and --no-tui fallback"}
