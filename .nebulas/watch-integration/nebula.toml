[nebula]
name = "Watch Integration"
description = "Wire up the --watch flag so WorkerGroup reacts to task file changes during execution"

[defaults]
type = "task"
priority = 2
labels = ["quasar", "watch"]

[execution]
max_workers = 1
max_review_cycles = 5
max_budget_usd = 50.0

[context]
repo = "github.com/papapumpkin/quasar"
working_dir = "."
goals = [
    "Make --watch functional: WorkerGroup.Run consumes Watcher.Changes during execution",
    "Hot-reload modified task descriptions for tasks not yet started",
    "Dynamically add new task files that appear during execution",
    "Gracefully handle removed task files (skip if not started, log if in-flight)",
    "Report watch events via the existing UI printer",
]
constraints = [
    "Only modify internal/nebula/ and internal/ui/ packages",
    "Do not change the Watcher implementation itself — it already works correctly",
    "Do not change the CLI layer (cmd/nebula.go) — it already wires Watcher into WorkerGroup",
    "Maintain backward compatibility: Watcher == nil means no watching (current behavior)",
    "Use select-based multiplexing in the Run loop, not a separate goroutine",
    "All new exported symbols need GoDoc comments",
    "Tests use stdlib testing only with table-driven subtests",
]
