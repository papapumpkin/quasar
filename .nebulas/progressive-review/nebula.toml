[nebula]
name = "progressive-review"
description = "Parameterize the reviewer with a strictness level that increases across cycles, so early cycles focus on approach correctness and later cycles polish naming, docs, and edge cases."

[defaults]
type = "task"
priority = 2
labels = ["quasar", "reviewer", "cost-optimization"]
assignee = ""

[execution]
max_workers = 6
max_review_cycles = 5
max_budget_usd = 40.0
model = ""
gate = "trust"

[context]
repo = "github.com/papapumpkin/quasar"
working_dir = "."
goals = [
    "Define strictness tiers (lenient, standard, strict) with clear reviewer behavior per tier",
    "Create tier-specific reviewer system prompt variants derived from DefaultReviewerSystemPrompt",
    "Implement a cycle-to-tier selector that maps CycleState.Cycle to the appropriate tier",
    "Integrate progressive strictness into the loop so reviewerAgent() and buildReviewerPrompt() use the correct tier each cycle",
]
constraints = [
    "Do not break the existing reviewer approval/issue parsing (isApproved, ParseReviewFindings, ParseReviewReport)",
    "The default behavior (no configuration) must match current strictness (all dimensions, all cycles)",
    "Tier definitions must live in internal/agent so they are co-located with DefaultReviewerSystemPrompt",
    "The cycle selector must be a pure function with no side effects, easily testable",
    "All existing loop tests must continue to pass",
]

[dependencies]
requires_beads = []
requires_nebulae = []
